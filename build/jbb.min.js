/* JBB Binary Bundle Loader - https://github.com/wavesoft/jbb */
var JBB=JBB||{};JBB.BinaryLoader=function(t){function r(i){if(e[i])return e[i].exports;var s=e[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){(function(r){"use strict";function i(t,r,e){return void 0!==t&&void 0===t.__meta&&"object"==typeof t&&Object.defineProperty(t,"__meta",{enumerable:!1,value:{type:r,meta:e}}),t}function s(t,r){var e=t.readStringLT(),s=new Blob([t.readTypedArray(k.UINT8,r)],{type:e});return E?i(URL.createObjectURL(s),"buffer",{mime:e,size:r}):URL.createObjectURL(s)}function n(t,r,e){var n=0,a="";switch(r){case 0:n=t.u8[t.i8++];break;case 1:n=t.u16[t.i16++];break;case 2:n=t.u32[t.i32++];break;case 3:n=t.f64[t.i64++]}if(0===e)return a=String.fromCharCode.apply(null,t.readTypedArray(k.UINT8,n)),E?i(a,"string.latin",{}):a;if(1===e)return a=String.fromCharCode.apply(null,t.readTypedArray(k.UINT16,n)),E?i(a,"string.utf8",{}):a;if(2===e){var o=document.createElement("img");return o.src=s(t,n),o}if(4===e){var o=document.createElement("script");return o.src=s(t,n),o}if(7===e)return s(t,n);throw new w.AssertError("Unknown buffer type #"+e+"!")}function a(t,r,e){if(!(32&e&&32!==(48&e))){var s=e;32&e&&(s=t.u8[t.i8++]|(15&e)<<8);var n=t.profile.decode(s);if(void 0===n)throw new w.AssertError("Could not found known object entity #"+s+"!");var a=n.create();t.iref_table.push(a);var o=p(t,r);return n.init(a,o,1,0),E&&i(a,"object.known",{eid:s}),a}if(56!==(60&e)){if(48===(56&e)){var s=(7&e)<<8|t.u8[t.i8++],h=p(t,r),u=t.factory_plain[s];if(void 0===u)throw new w.AssertError("Could not found simple object signature with id #"+s+"!");return E?i(u(h),"object.plain",{eid:s}):u(h)}throw new w.AssertError("Unexpected object opcode 0x"+e.toString(16)+"!")}var f=3&e;switch(f){case 0:var c=t.f64[t.i64++];10*t.s8[t.i8++];return E?i(new Date(c),"object.date",{}):new Date(c);default:throw new w.AssertError("Unknown primitive object with POID #"+f+"!")}}function o(t,r,e,s){for(var n=new R[N.FROM[s]](e),a=t.readTypedNum(N.FROM[s]),o=t.readFloat64(),h=t.readTypedArray(N.TO[s],e),u=0;e>u;++u)n[u]=a+h[u]*o,console.log("<<<",h[u],"->",n[u]);return E?i(n,"array.delta.float",{}):n}function h(t,r,e,s){var n=U.FROM[s],a=new R[n](e),o=0;switch(n){case 0:o=t.u8[t.i8++];break;case 1:o=t.s8[t.i8++];break;case 2:o=t.u16[t.i16++];break;case 3:o=t.s16[t.i16++];break;case 4:o=t.u32[t.i32++];break;case 5:o=t.s32[t.i32++];break;case 6:o=t.f32[t.i32++];break;case 7:o=t.f64[t.i64++]}var h=t.readTypedArray(U.TO[s],e-1);a[0]=o;for(var u=0,f=h.length;f>u;++u)o+=h[u],a[u+1]=o;return E?i(a,"array.delta.int",{}):a}function u(t,r){var e=t.u16[t.i16++],s=t.signature_table[e],n=t.factory_plain_bulk[e];if(void 0===n)throw new w.AssertError("Could not found simple object signature with id #"+e+"!");for(var a=p(t,r),o=a.length/s.length,h=new Array(o),u=0;o>u;++u)h[u]=n(a,u);return E?i(h,"array.primitive.bulk_plain",{sid:e}):h}function f(t,r,e){var s=!1,n=t.u16[t.i16++],a=t.profile.decode(n),o=a.props,h=0,u=[],f=0,c=0,l=0,d=null,v=0,b=0,y=[],g=[];for(65536>e?(l=t.u16[t.i16++],s&&console.log("-<- HINT16="+l)):(l=t.u32[t.i32++],s&&console.log("-<- HINT32="+l)),u=Array(l),f=0;l>f;++f)t.iref_table.push(u[f]=a.create());if(l){if(y=p(t,r),void 0===y.length)throw new w.AssertError("Decoded known bulk primitive is not array!");h=y.length/o}var m=new Array(e),T=0,A=void 0;for(f=0;e>f;)if(b=t.u8[t.i8++],(128&b)===L.LREF_7)c=127&b,s&&console.log("-<- LREF_7(",c,"), i=",f),m[f++]=A=g[c];else if((192&b)===L.DEFINE){for(c=(63&b)+1,s&&console.log("-<- DEFINE(",c,"), i=",f),v=0;c>v;v++)d=u[T],a.init(d,y,h,T),m[f++]=d,T++;A=d}else if((224&b)===L.REPEAT)for(c=(31&b)+1,s&&console.log("-<- REPEAT(",c,"), i=",f),v=0;c>v;v++)m[f++]=A;else if((240&b)===L.IREF){if(c=(15&b)<<16|t.u16[t.i16++],s&&console.log("-<- IREF(",c,"), i=",f),c>=t.iref_table.length)throw new w.IRefError("Invalid IREF #"+c+"!");m[f++]=A=t.iref_table[c],g.push(t.iref_table[c])}else if((248&b)===L.LREF_11)c=(7&b)<<8|t.u8[t.i8++],s&&console.log("-<- LREF_11(",c,"), i=",f),m[f++]=A=g[c];else if(b===L.LREF_16)c=t.u16[t.i16++],s&&console.log("-<- LREF_16(",c,"), i=",f),m[f++]=A=g[c];else if(b===L.XREF){if(c=t.readStringLT(),s&&console.log("-<- XREF(",c,"), i=",f),void 0===r[c])throw new w.XRefError("Cannot import undefined external reference "+c+"!");m[f++]=A=r[c]}return E?i(m,"array.bulk",{eid:n}):m}function c(t,r,e,s){for(var n,a,o=t.u8[t.i8++],h=[],u=[],f=0,c=!0,p=0,d=0,v=0,b=0,y=0,g=0;e>f;){if(s)if(64===(240&o)){switch(v=1&o,b=o>>1&7,y=v?t.u32[t.i32++]:t.u16[t.i16++],E&&h.push({type:o,len:y}),c&&(a=new R[b](e),c=!1),b){case 0:g=t.u8[t.i8++];break;case 1:g=t.s8[t.i8++];break;case 2:g=t.u16[t.i16++];break;case 3:g=t.s16[t.i16++];break;case 4:g=t.u32[t.i32++];break;case 5:g=t.s32[t.i32++];break;case 6:g=t.f32[t.i32++];break;case 7:g=t.f64[t.i64++]}a.fill(g,f,f+y),f+=y}else{if(n=l(t,r,o),E&&h.push({type:o,len:n.length}),void 0===n.length)throw new w.AssertError("Encountered non-array chunk as part of chunked array!");if(c&&(a=new n.constructor(e),c=!1),!(n instanceof a.constructor))throw new w.AssertError("Got is_numeric flag, but chunks are not of the same type (op was "+o+"!");a.set(n,f),f+=n.length}else{if(n=l(t,r,o),E&&h.push({type:o,len:n.length}),void 0===n.length)throw new w.AssertError("Encountered non-array chunk as part of chunked array!");for(c&&(u=new Array(e),c=!1),p=0,d=n.length;d>p;p++,f++)u[f]=n[p]}if(!(e>f))break;o=t.u8[t.i8++]}return s?E?i(a,"array.primitive.chunked",{chunks:h,numeric:!0}):a:E?i(u,"array.primitive.chunked",{chunks:h,numeric:!1}):u}function l(t,r,e){var s,n=0,a=0,l=0,d=0,v=[];if(e=255&e,110===e)return u(t,r);if(111===e){for(d=t.u8[t.i8++],v[d-1]=null,n=0;d>n;++n)v[n]=p(t,r);return E?i(v,"array.primitive.short",{}):v}if(126===e)return E?i([],"array.empty",{}):[];if(127===e)throw new w.AssertError("Encountered PRIM_CHUNK_END outside of chunked array!");if(0===(224&e)){l=1&e,a=e>>1&15,d=l?t.u32[t.i32++]:t.u16[t.i16++],s=t.readTypedArray(F.TO[a],d);var b=new R[F.FROM[a]](s);return E?i(b,"array.numeric.downscaled",{type:a}):b}if(32===(240&e))return l=1&e,a=e>>1&7,d=l?t.u32[t.i32++]:t.u16[t.i16++],h(t,r,d,a);if(48===(240&e))return l=1&e,a=e>>1&7,d=l?t.u32[t.i32++]:t.u16[t.i16++],o(t,r,d,a);if(64===(240&e)){switch(l=1&e,a=e>>1&7,d=l?t.u32[t.i32++]:t.u16[t.i16++],a){case 0:s=t.u8[t.i8++];break;case 1:s=t.s8[t.i8++];break;case 2:s=t.u16[t.i16++];break;case 3:s=t.s16[t.i16++];break;case 4:s=t.u32[t.i32++];break;case 5:s=t.s32[t.i32++];break;case 6:s=t.f32[t.i32++];break;case 7:s=t.f64[t.i64++]}var b=new R[a](d);for(n=0;d>n;++n)b[n]=s;return E?i(b,"array.numeric.repeated",{type:a}):b}if(80===(240&e))return l=1&e,a=e>>1&7,d=l?t.u32[t.i32++]:t.u16[t.i16++],v=t.readTypedArray(a,d),E?i(v,"array.numeric.raw",{type:a}):v;if(96===(248&e))return a=7&e,d=t.u8[t.i8++],v=t.readTypedArray(a,d),E?i(v,"array.numeric.short",{type:a}):v;if(104===(254&e)){for(l=1&e,d=l?t.u32[t.i32++]:t.u16[t.i16++],s=p(t,r),v[d-1]=null,n=0;d>n;n++)v[n]=s;return E?i(v,"array.primitive.repeated",{type:a}):v}if(106===(254&e)){for(l=1&e,d=l?t.u32[t.i32++]:t.u16[t.i16++],v[d-1]=null,n=0;d>n;++n)v[n]=p(t,r);return E?i(v,"array.primitive.raw",{}):v}if(120===(252&e))return l=1&e,a=e>>1&1,d=l?t.u32[t.i32++]:t.u16[t.i16++],c(t,r,d,a);if(124===(254&e))return l=1&e,d=l?t.u32[t.i32++]:t.u16[t.i16++],f(t,r,d);throw new w.AssertError("Unknown array op-code 0x"+e.toString(16)+" at offset @"+(t.i8-t.ofs8)+"!")}function p(t,r){var e=t.u8[t.i8++];if(0===(128&e))return l(t,r,127&e);if(128===(192&e))return a(t,r,63&e);if(192===(224&e))return n(t,(24&e)>>3,7&e);if(224===(240&e)){var s=t.u16[t.i16++];if(s=(15&e)<<16|s,s>=t.iref_table.length)throw new w.IRefError("Invalid IREF #"+s+"!");return E?i(t.iref_table[s],"object.iref",{id:s}):t.iref_table[s]}if(240===(248&e))switch(7&e){case 0:return t.u8[t.i8++];case 1:return t.s8[t.i8++];case 2:return t.u16[t.i16++];case 3:return t.s16[t.i16++];case 4:return t.u32[t.i32++];case 5:return t.s32[t.i32++];case 6:return t.f32[t.i32++];case 7:return t.f64[t.i64++]}else{if(248===(252&e))return O[3&e];if(252===(254&e))return j[2&e];if(254===(255&e)){var o=t.readStringLT();if(void 0===r[o])throw new w.XRefError("Cannot import undefined external reference "+o+"!");return E?i(r[o],"object.string",{key:o}):r[o]}if(255===(255&e))throw new w.AssertError("Encountered RESERVED primitive operator!")}}function d(t,r){for(;!t.eof();){var e=t.u8[t.i8++];switch(e){case 248:var i=t.prefix+t.readStringLT();r[i]=p(t,r);break;default:throw new w.AssertError("Unknown control operator 0x"+e.toString(16)+" at @"+t.i8+"!")}}}function v(t,r,e){var i=t.length,s=Array(i),n=!1;return t.forEach(function(a,o){var h=new XMLHttpRequest;h.open("GET",t[o]),h.responseType="arraybuffer",h.send(),h.addEventListener("progress",function(t){t.lengthComputable&&r.update(h,t.loaded,t.total)}),h.addEventListener("readystatechange",function(){if(4===h.readyState)if(200===h.status)s[o]=h.response,0===--i&&(r.complete(),e(null));else{if(n)return;n=!0,r.complete(),e("Error loading "+t[o]+": "+h.statusText)}})}),s}var b=e(2),y=e(3),g=e(4),w=e(5),m="undefined"==typeof window,T=1,E=!T;if(E&&console.warn("Using debug version of decoder"),m)var A=e(6);var _=0,I=1,k={UINT8:0,INT8:1,UINT16:2,INT16:3,UINT32:4,INT32:5,FLOAT32:6,FLOAT64:7},F={FROM:[k.UINT16,k.INT16,k.UINT32,k.INT32,k.UINT32,k.INT32,k.FLOAT32,k.FLOAT32,k.FLOAT32,k.FLOAT32,k.FLOAT64,k.FLOAT64,k.FLOAT64,k.FLOAT64,k.FLOAT64],TO:[k.UINT8,k.INT8,k.UINT8,k.INT8,k.UINT16,k.INT16,k.UINT8,k.INT8,k.UINT16,k.INT16,k.UINT8,k.INT8,k.UINT16,k.INT16,k.FLOAT32]},U={FROM:[k.UINT16,k.INT16,k.UINT32,k.INT32,k.UINT32,k.INT32],TO:[k.INT8,k.INT8,k.INT8,k.INT8,k.INT16,k.INT16]},N={FROM:[k.FLOAT32,k.FLOAT32,k.FLOAT64,k.FLOAT64],TO:[k.INT8,k.INT16,k.INT8,k.INT16]},R=[Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,Float32Array,Float64Array],L=([k.UINT16,k.UINT32],[k.UINT8,k.UINT16,k.UINT32,k.FLOAT64],{LREF_7:0,LREF_11:240,LREF_16:254,IREF:224,XREF:255,DEFINE:128,REPEAT:192}),O=[void 0,null,!1,!0],j=[NaN],x=function(t,r){"object"==typeof t&&(r=t,t=""),this.database=r||{},this.baseDir=t||"",this.queuedRequests=[],this.profile=new y,this.progressManager=new g};x.prototype={constructor:x,addProfile:function(t){this.profile.add(t)},add:function(t,r){if(m){var e=function(t){var r=A.readFileSync(t),e=new Uint8Array(r);return e.buffer};if(".jbbp"===t.substr(-5)){var i=t.substr(0,t.length-5);this.addByBuffer([e(i+".jbbp"),e(i+"_b16.jbbp"),e(i+"_b32.jbbp"),e(i+"_b64.jbbp")],r)}else this.addByBuffer(e(t),r)}else{var s="";this.baseDir&&(s=this.baseDir+"/");var n=t.split("?"),a="",o=[];if(n.length>1&&(a="?"+n[1]),".jbbp"===n[0].substr(n[0].length-5).toLowerCase()){var i=s+n[0].substr(0,n[0].length-5);o=[i+".jbbp"+a,i+"_b16.jbbp"+a,i+"_b32.jbbp"+a,i+"_b64.jbbp"+a]}else{var t=n[0];".jbb"!=t.substr(t.length-4)&&(t+=".jbb"),o=[s+t+a]}var h={callback:r,status:_,buffer:void 0,url:o};this.queuedRequests.push(h)}},addByBuffer:function(t,r){var e={callback:r,status:I,buffer:t,url:void 0};this.queuedRequests.push(e)},addProgressHandler:function(t){this.progressManager.addHandler(t)},removeProgressHandler:function(t){this.progressManager.removeHandler(t)},load:function(t){this.__process(t)},__process:function(t){var r=this;if(t||(t=function(){}),0===this.queuedRequests.length)return void t(null,this.database);for(var e=!1,i=0;i<this.queuedRequests.length;++i)if(this.queuedRequests[i].status===_){e=!0;break}if(e)for(var s={counter:0},n=function(){0===--this.counter&&r.__process(t)}.bind(s),a=!1,i=0;i<this.queuedRequests.length;++i){var o=this.queuedRequests[i],h=this.progressManager.part();o.status===_&&(s.counter++,o.buffer=v(o.url,h,function(r){return function(e){if(e){if(a)return;var i="Error downloading bundle: "+e;return r.callback&&r.callback(i,null),t&&t(i,null),void(a=!0)}r.status=I,n()}}(o)))}else{for(var i=0;i<this.queuedRequests.length;++i){var o=this.queuedRequests[i];if(o.status===I){var u;u=1===o.buffer.length?new b(o.buffer[0],r.profile):new b(o.buffer,r.profile),d(u,r.database),o.callback&&o.callback(null,o.bundle)}}this.queuedRequests=[],t(null,this.database)}}},t.exports=x}).call(r,e(1))},function(t,r){function e(){u&&a&&(u=!1,a.length?h=a.concat(h):f=-1,h.length&&i())}function i(){if(!u){var t=setTimeout(e);u=!0;for(var r=h.length;r;){for(a=h,h=[];++f<r;)a&&a[f].run();f=-1,r=h.length}a=null,u=!1,clearTimeout(t)}}function s(t,r){this.fun=t,this.array=r}function n(){}var a,o=t.exports={},h=[],u=!1,f=-1;o.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)r[e-1]=arguments[e];h.push(new s(t,r)),1!==h.length||u||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,r){"use strict";function e(t){for(var r="",e=0;t>e;++e)0!==e&&(r+=","),r+="p[i+c*"+e+"]";return new Function("p","i","var c=p.length/"+t+";return ["+r+"]")}var i=function(t,r){this.profile=r,this.prefix="",this.sparse=t instanceof Array;var i,s,n,a=32;if(this.sparse?(this.u8=new Uint8Array(t[0]),this.s8=new Int8Array(t[0]),this.u16=new Uint16Array(t[1]),this.s16=new Int16Array(t[1]),this.u32=new Uint32Array(t[2]),this.s32=new Int32Array(t[2]),this.f32=new Float32Array(t[2]),this.f64=new Float64Array(t[3]),i=new Uint16Array(t[0],0,a/2),s=new Uint32Array(t[0],0,a/4),n=t[0].byteLength):(this.u8=new Uint8Array(t),this.s8=new Int8Array(t),this.u16=new Uint16Array(t),this.s16=new Int16Array(t),this.u32=new Uint32Array(t),this.s32=new Int32Array(t),this.f32=new Float32Array(t),this.f64=new Float64Array(t),i=new Uint16Array(t),s=new Uint32Array(t),n=t.byteLength),this.magic=i[0],this.table_id=i[1],this.version=i[2],this.table_count=i[3],this.ver_major=255&this.version,this.ver_minor=(65280&this.version)>>8,this.max64=s[2],this.max32=s[3],this.max16=s[4],this.max8=s[5],this.lenST=s[6],this.lenOT=s[7],12610==this.magic)throw{name:"EndianessError",message:"Unfortunately the JBB format is currently only compatible with Little-Endian CPUs",toString:function(){return this.name+": "+this.message}};if(16945!=this.magic)throw{name:"DecodingError",message:"This does not look like a JBB archive! (Magic is 0x"+this.magic.toString(16)+")",toString:function(){return this.name+": "+this.message}};if(258!=this.version)throw{name:"DecodingError",message:"Unsupported bundle version v"+this.ver_minor+"."+this.ver_minor,toString:function(){return this.name+": "+this.message}};this.sparse?(this.i64=0,this.i32=0,this.i16=0,this.i8=a,this.iEnd=this.i8+this.max8-this.lenST,this.ofs8=this.i8,this.ofs16=this.i16,this.ofs32=this.i32,this.ofs64=this.i64):(this.i64=a,this.i32=this.i64+this.max64,this.i16=this.i32+this.max32,this.i8=this.i16+this.max16,this.iEnd=this.i8+this.max8-this.lenST,this.ofs8=this.i8,this.ofs16=this.i16,this.ofs32=this.i32,this.ofs64=this.i64,this.i16/=2,this.i32/=4,this.i64/=8);var o=[];if(this.table_count<=1)0!==this.table_id&&o.push(this.table_id);else{if(0!==this.table_id)throw{name:"DecodingError",message:"Invalid header data",toString:function(){return this.name+": "+this.message}};for(var h=0;h<this.table_count;++h)o.push(this.u16[this.i16++])}this.profile.use(o),this.iref_table=[];var u="",f=!1;if(this.string_table=[],this.lenST>0){for(var c=this.i8+this.max8,h=c-this.lenST;c>h;++h){var l=this.u8[h];0===l?(this.string_table.push(u),u="",f=!1):(u+=String.fromCharCode(l),f=!0)}f&&this.string_table.push(u)}var p=[],d=0,v=!1;if(this.signature_table=[],this.lenOT>0){for(var c=2*this.i16+this.max16,h=c-this.lenOT;c>h;h+=2){var l=this.u16[h/2];d--?p.push(this.string_table[l]):(v&&this.signature_table.push(p),p=[],d=l,v=!0)}v&&this.signature_table.push(p)}this.sparse?this.readTypedArray=function(r,e){var i=this.i8,s=2*this.i16,n=4*this.i32,a=8*this.i64;switch(r){case 0:return this.i8+=e,new Uint8Array(t[0],i,e);case 1:return this.i8+=e,new Int8Array(t[0],i,e);case 2:return this.i16+=e,new Uint16Array(t[1],s,e);case 3:return this.i16+=e,new Int16Array(t[1],s,e);case 4:return this.i32+=e,new Uint32Array(t[2],n,e);case 5:return this.i32+=e,new Int32Array(t[2],n,e);case 6:return this.i32+=e,new Float32Array(t[2],n,e);case 7:return this.i64+=e,new Float64Array(t[3],a,e)}}:this.readTypedArray=function(r,e){var i=this.i8,s=2*this.i16,n=4*this.i32,a=8*this.i64;switch(r){case 0:return this.i8+=e,new Uint8Array(t,i,e);case 1:return this.i8+=e,new Int8Array(t,i,e);case 2:return this.i16+=e,new Uint16Array(t,s,e);case 3:return this.i16+=e,new Int16Array(t,s,e);case 4:return this.i32+=e,new Uint32Array(t,n,e);case 5:return this.i32+=e,new Int32Array(t,n,e);case 6:return this.i32+=e,new Float32Array(t,n,e);case 7:return this.i64+=e,new Float64Array(t,a,e)}},this.factory_plain=[],this.factory_plain_bulk=[];for(var h=0;h<this.signature_table.length;++h){for(var b=this.signature_table[h],y=b.length,g="return {",w="var c=values.length/"+y+";"+g,m=0;y>m;++m)g+="'"+b[m]+"': values["+m+"],",w+="'"+b[m]+"': values[i+c*"+m+"],";g+="}",w+="}",this.factory_plain.push(new Function("values",g)),this.factory_plain_bulk.push(new Function("values","i",w))}this.factory_weave=[function(t,r){return[]}];for(var h=1;16>h;++h)this.factory_weave.push(e(h))};i.prototype.getWeavePropertyFunction=function(t){return void 0!==this.factory_weave[t]?this.factory_weave[t]:(this.factory_weave[t]=e(t),this.factory_weave[t])},i.prototype.readStringLT=function(){var t=this.u16[this.i16++];if(t>=this.string_table.length)throw{name:"RangeError",message:"String ID is outside than the range of the string lookup table!",toString:function(){return this.name+": "+this.message}};return this.string_table[t]},i.prototype.eof=function(){return this.i8>=this.iEnd},i.prototype.where=function(){console.log("i8=",this.i8-this.ofs8," [U:",this.u8[this.i8],"0x"+this.u8[this.i8].toString(16),"/ S:",this.s8[this.i8],"]"),console.log("i16=",this.i16-this.ofs16/2," [U:",this.u16[this.i16],"/ S:",this.s16[this.i16],"]"),console.log("i32=",this.i32-this.ofs32/4," [U:",this.u32[this.i32],"/ S:",this.s32[this.i32],"/ F:",this.f32[this.i32],"]"),console.log("i64=",this.i64-this.ofs64/8," [F:",this.f64[this.i64],"]")},t.exports=i},function(t,r){"use strict";var e=function(){this.size=0,this._lib=[],this._profiles=[],this._offset=0,this._foffset=0};e.prototype.add=function(t){this._lib.push(t)},e.prototype.use=function(t){if(0!=t.length)for(var r=0,e=t.length;e>r;r++){for(var i=null,s=t[r],n=0,a=this._lib.length;a>n;n++){var o=this._lib[n];if(o.id===s){i=o;break}}if(null===i){var h=(65520&s)>>4,u=15&s;throw{name:"DecodingError",message:"The bundle uses profile 0x"+h.toString(16)+", rev "+u+" but it was not loaded!",toString:function(){return this.name+": "+this.message}}}this.size+=i.size,this._profiles.push([i,this._foffset,this._foffset+i.frequent,this._offset,this._offset+i.size-i.frequent]),this._offset+=i.size-i.frequent,this._foffset+=i.frequent}},e.prototype.decode=function(t){if(32>t)for(var r=0,e=this._profiles.length;e>r;++r){var i=this._profiles[r],s=i[0],n=i[1],a=i[2];if(t>=n&&a>t)return s.decode(t-n)}else{t-=32;for(var r=0,e=this._profiles.length;e>r;++r){var i=this._profiles[r],s=i[0],n=i[3],a=i[4];if(t>=n&&a>t)return s.decode(t-n+32)}}},t.exports=e},function(t,r){"use strict";var e=function(t){this.parent=t,this.objectLookup=[],this.objects=[],this.value=0};e.prototype.update=function(t,r,e){var i=this.objectLookup.indexOf(t);-1===i?(i=this.objectLookup.length,this.objectLookup.push(t),this.objects.push([r,e])):(this.objects[i][0]=r,this.objects[i][1]=e);for(var s=0,n=0,a=0;a<this.objects.length;a++)s+=this.objects[a][0],n+=this.objects[a][1];this.value=s/n,this.parent.update()},e.prototype.complete=function(){this.value=1,this.parent.update();var t=this.parent.parts.indexOf(this);-1!==t&&this.parent.parts.splice(t,1)};var i=function(){this.handlers=[],this.parts=[],this.active=!1};i.prototype.part=function(){var t=new e(this);return this.parts.push(t),this.update(),t},i.prototype.update=function(){var t=0,r=0;if(0===this.parts.length)t=1;else{for(var e=0;e<this.parts.length;e++)t+=this.parts[e].value;t/=this.parts.length}if(this.active||1==t?this.active&&1==t&&(this.active=!1,r=2):(this.active=!0,r=1),this.active||2===r){for(var e=0;e<this.handlers.length;e++)this.handlers[e](t,r);console.log(">",t,r)}},i.prototype.addHandler=function(t){this.handlers.push(t)},i.prototype.removeHandler=function(t){var r=this.handlers.indexOf(t);-1!==r&&this.handlers.splice(r,1)},t.exports=i},function(t,r){"use strict";var e=function(t){var r=Error.call(this,t);r.name=this.name="EncodeError",this.stack=r.stack,this.message=r.message};e.prototype=Object.create(Error.prototype);var i=function(t){var r=Error.call(this,t);r.name=this.name="AssertError",this.stack=r.stack,this.message=r.message};i.prototype=Object.create(Error.prototype);var s=function(t){var r=Error.call(this,t);r.name=this.name="PackError",this.stack=r.stack,this.message=r.message};s.prototype=Object.create(Error.prototype);var n=function(t){var r=Error.call(this,t);r.name=this.name="LoadError",this.stack=r.stack,this.message=r.message};n.prototype=Object.create(Error.prototype);var a=function(t){var r=Error.call(this,t);r.name=this.name="RangeError",this.stack=r.stack,this.message=r.message};a.prototype=Object.create(Error.prototype);var o=function(t){var r=Error.call(this,t);r.name=this.name="IRefError",this.stack=r.stack,this.message=r.message};o.prototype=Object.create(Error.prototype);var h=function(t){var r=Error.call(this,t);r.name=this.name="XRefError",this.stack=r.stack,this.message=r.message};h.prototype=Object.create(Error.prototype),t.exports={EncodeError:e,AssertError:i,PackError:s,RangeError:a,IRefError:o,XRefError:h}},function(t,r){}]);